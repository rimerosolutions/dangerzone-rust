#+TITLE: entrusted README

* What is this?

** Overview

=Entrusted= is a document sanitizer tool that converts "/potentially suspicious files/" into /safe PDFs/:
- This is achieved by processing documents inside a "lightweight sandbox" ([[https://www.ibm.com/cloud/learn/containerization][containerization]])
- PDF documents, common image formats and Office documents ([[https://www.office.com/][MS Office]] or [[https://www.libreoffice.org/discover/what-is-opendocument/][OpenDocument]]) are supported

*NOTE*: Unless you use the [[https://github.com/rimerosolutions/entrusted/tree/main/ci_cd/live_cd][live CD]], you MUST install either [[https://www.docker.com/products/docker-desktop/][Docker]] or [[https://podman.io/getting-started/][Podman]] prior running the program.

[[./images/screenshot.gif]]

** Features

- Documents or images are converted inside a "sandbox" (internet access disabled)
- The transformation of large/complex documents is frictionless (timeouts or other user-visible issues)
- Files can be converted in batch (serial conversions for now)
- An optional Web interface is available and can act as an "online service"
- The [[https://github.com/rimerosolutions/entrusted/tree/main/ci_cd/live_cd][live CD]] provides both enhanced security and convenience:
  - Pre-installed [[https://xebia.com/blog/podman-the-free-container-engine-alternative-to-docker/][container solution]], with no required user configuration ([[./entrusted_webserver][Web interface]])
  - Extra isolation layer via a virtual machine
- The application has multilingual support (English and French for now)
- Password-protected documents can be processed (known Office document formats and PDF files)
- On Mac OS, [[https://github.com/lima-vm/lima][Lima]] can be installed as an alternative to [[https://www.docker.com/products/docker-desktop/][Docker]] (/default Lima instance/ only)
    
* What is available?

** User interfaces

There are three user interfaces ([[./entrusted_client][Desktop and CLI]], [[./entrusted_webserver][Web]]):
- The graphical Desktop interface is recommended for most users
- If you prefer the Web interface, please download the live CD for an out-of-the-box user experience:
  - You can run the live CD with tools such as [[https://www.qemu.org/][QEMU]], [[https://www.virtualbox.org/wiki/Downloads][VirtualBox]], [[https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v][Hyper-V]], [[https://www.vmware.com/nl/products/workstation-player.html][VmWare]], [[https://www.parallels.com/][Parallels]], etc.
  - The Web UI can be accessed at the address =http://localhost:13000=
  - Replace =localhost= by the IP address of your virtual machine in the above-mentioned link

** Downloads

Please visit the [[https://github.com/rimerosolutions/entrusted/releases][releases page]] for downloads (64-bit: [[https://en.wikipedia.org/wiki/X86-64][amd64/x86_64]] and [[https://en.wikipedia.org/wiki/AArch64][aarch64/arm64]]).
- On Linux, if you prefer [[https://flatpak.org/][Flatpak]], please check out the [[https://github.com/axtloss/flatpaks][axtloss flatpaks]] project page
- =aarch64= (=arm64=) builds are not yet available for Windows or the Live CD

|-----------+------------------------------------------+-----------------------------------------------|
| "System"  | Artifact                                 | Description                                   |
|-----------+------------------------------------------+-----------------------------------------------|
| =Linux=   | =entrusted-linux-amd64-<version>.deb=    | Desktop and CLI clients (Debian-Like distros) |
|           | =entrusted-linux-amd64-<version>.rpm=    | Desktop and CLI clients (Redhat-Like distros) |
|           | =entrusted-linux-amd64-<version>.tar=    | Archive with all programs                     |
|           | =entrusted-linux-aarch64-<version>.deb=  | Desktop and CLI clients (Debian-Like distros) |
|           | =entrusted-linux-aarch64-<version>.rpm=  | Desktop and CLI clients (Redhat-Like distros) |
|           | =entrusted-linux-aarch64-<version>.tar=  | Archive with all programs                     |
|-----------+------------------------------------------+-----------------------------------------------|
| =Mac OS=  | =entrusted-macos-amd64-<version>.dmg=    | Installer with the Desktop and CLI clients    |
|           | =entrusted-macos-amd64-<version>.zip=    | Archive with all programs                     |
|           | =entrusted-macos-aarch64-<version>.dmg=  | Installer with the Desktop and CLI clients    |
|           | =entrusted-macos-aarch64-<version>.zip=  | Archive with all programs                     |
|-----------+------------------------------------------+-----------------------------------------------|
| =Windows= | =entrusted-windows-amd64-<version>.exe=  | Installer with the Desktop and CLI clients    |
|           | =entrusted-windows-amd64-<version>.zip=  | Archive with all programs                     |
|-----------+------------------------------------------+-----------------------------------------------|
| =Live CD= | =entrusted-livecd-amd64-<version>.iso=   | Web interface Live CD for virtual machines    |
|-----------+------------------------------------------+-----------------------------------------------|


** Key software components

Most users will interact with the Desktop user interface (=entrusted_client= component).

|---------------------+-----------------------------------------------|
| Component           | Purpose                                       |
|---------------------+-----------------------------------------------|
| [[./entrusted_container][entrusted_container]] | Document processing "sandbox"                 |
| [[./entrusted_client][entrusted_client]]    | Command-line and graphical user interfaces    |
| [[./entrusted_webserver][entrusted_webserver]] | Online service feature with a Web interface   |
| [[./entrusted_webclient][entrusted_webclient]] | Command-line client for =entrusted_webserver= |
| [[./entrusted_l10n][entrusted_l10n]]      | Shared library for text translations          |
|---------------------+-----------------------------------------------|

** Architecture overview

Below is a high-level architecture overview, the solution relies on a container engine solution (i.e. [[https://www.docker.com/][Docker]]).

[[./images/architecture.png]]


* What is required?

It is assumed that you can dedicate at least 1 GB of memory for document processing.
- *Operating System*: Linux, Mac OS or Windows
- *Container Runtime*: [[https://podman.io/][Podman]] (Linux), [[https://www.docker.com/][Docker]] (Linux, Mac OS, Windows) or [[https://github.com/lima-vm/lima][Lima]] (Mac OS)

Conversions will fail if the container solution is not running or available in your [[https://www.java.com/en/download/help/path.html]["PATH settings"]]:
  - The tool doesn't attempt to modify software on your machine (install or change programs)
  - The tool doesn't attempt to manage software on your machine (start or stop services)

* Few references

- [[https://dangerzone.rocks/][Dangerzone]], the application that =Entrusted= is originally based-on
- Disabling file preview and thumbnails ([[https://portal.msrc.microsoft.com/en-US/security-guidance/advisory/ADV200006][Windows]], [[https://osxdaily.com/2013/01/10/disable-finder-icon-thumbnails-previews-mac-os-x/][Mac OS]], Unix/Linux: [[https://gitlab.gnome.org/GNOME/eog/-/issues/130][Gnome]], [[https://www.reddit.com/r/kde/comments/gufzbh/how_do_you_turn_off_the_tiny_image_previews_in/][KDE]], etc.)
- Security vulnerabilities for [[https://www.cvedetails.com/vulnerability-list/vendor_id-22772/product_id-80467/Podman-Project-Podman.html][Podman]], [[https://www.cvedetails.com/vulnerability-list/vendor_id-13534/product_id-28125/Docker-Docker.html][Docker]]
- Few container vulnerability scanning tools: [[https://trivy.dev/][Trivy]], [[https://quay.github.io/clair/][Clair]], [[https://github.com/deepfence/ThreatMapper][ThreatMapper]]
