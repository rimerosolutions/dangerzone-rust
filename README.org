#+TITLE: entrusted README

* What is this?

** Overview

=Entrusted= is a document sanitizer tool that converts "/potentially suspicious files/" into /safe PDFs/:
- This is achieved by transforming documents inside a "lightweight sandbox" ([[https://www.ibm.com/cloud/learn/containerization][containerization]]): =containerization= itself does not provide absolute security guarantees...
- Supported file formats include PDF, common image formats, Office documents ([[https://www.office.com/][Microsoft Office]] or [[https://www.libreoffice.org/discover/what-is-opendocument/][OpenDocument]]). For Office documents, supported is limited to text documents, spreadsheets and presentations.

*NOTE*: Unless you use the live CD, you MUST install either [[https://www.docker.com/products/docker-desktop/][Docker]] or [[https://podman.io/getting-started/][Podman]] prior running the program.

Below are some screenshots of the graphical Desktop client running on Mac OS.

[[./images/ui-screenshot-settings.png]]

[[./images/ui-screenshot-convert.png]]

** Features

This application is a [[https://www.rust-lang.org/][Rust]] port of [[https://dangerzone.rocks/][Dangerzone]], originally for experimentation purposes (/not an exact port/).
- Similarly to the original /Dangerzone/ tool, documents or images are converted inside a "sandbox"
- Documents can be converted in batch (sequential conversions for now)
- Password-protected files are supported: supported Office document formats and PDF files
- An optional Web interface is available and can act as an "online service" (towards multi-tenancy)
- The transformation of large/complex documents is frictionless (timeouts or other user-visible issues)
- The live CD provides both enhanced security and convenience:
  - Pre-installed [[https://xebia.com/blog/podman-the-free-container-engine-alternative-to-docker/][container solution]], with no required user configuration ([[./entrusted_webserver][entrusted_webserver]])
  - Extra isolation layer with a virtual machine
- The application support multiple languages (English and French for now)
- On Mac OS, [[https://github.com/lima-vm/lima][Lima]] is supported as an alternative to [[https://www.docker.com/products/docker-desktop/][Docker]]
    
* What is available?

** User interfaces

There are 3 user interfaces ([[./entrusted_client][Desktop and CLI]], [[./entrusted_webserver][Web]])
- Most users will likely want the Desktop version
- If you prefer the Web interface, please download the live CD ISO for an "out of the box non-involved user experience" (/unless you'd rather setup the Web server yourself/):
  - You can run the live CD with tools such as [[https://www.qemu.org/][QEMU]], [[https://www.virtualbox.org/wiki/Downloads][VirtualBox]], [[https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v][Hyper-V]], [[https://www.vmware.com/nl/products/workstation-player.html][VmWare]], [[https://www.parallels.com/][Parallels]], etc.
  - The Web UI is available at =http://localhost:13000=
  - Replace =localhost= by the IP address of your virtual machine in the above-mentioned link

** Download artifacts

For downloads, please visit the [[https://github.com/rimerosolutions/entrusted/releases][releases page]] (64 bit operating systems).

|------------------+-----------------------------------------+--------------------------------------------|
| Operating System | Artifact                                | Description                                |
|------------------+-----------------------------------------+--------------------------------------------|
| =Linux=          | =entrusted-linux-amd64-<version>.tar=   | Archive with all the programs              |
|------------------+-----------------------------------------+--------------------------------------------|
| =Mac OS=         | =entrusted-macos-amd64-<version>.dmg=   | Installer with the Desktop and CLI clients |
|                  | =entrusted-macos-amd64-<version>.zip=   | Archive with all programs                  |
|------------------+-----------------------------------------+--------------------------------------------|
| =MS Windows=     | =entrusted-windows-amd64-<version>.exe= | Installer with the Desktop and CLI clients |
|                  | =entrusted-windows-amd64-<version>.zip= | Archive with all the programs              |
|------------------+-----------------------------------------+--------------------------------------------|
| =Live CD=        | =entrusted-livecd-amd64-<version>.iso=  | Web interface deployed in VM               |
|------------------+-----------------------------------------+--------------------------------------------|

** Key software components

Most users will interact with the =entrusted_client=, via its Desktop user interface:
- This doesn't install a container runtime, but will display "useful" error messages when possible
- This will automatically download a container image (~600 MB), if needed, prior conversion

|---------------------+---------------------------------------------|
| Component           | Purpose                                     |
|---------------------+---------------------------------------------|
| [[./entrusted_container][entrusted_container]] | Document processing "sandbox"               |
| [[./entrusted_client][entrusted_client]]    | Command-line and graphical user interfaces  |
| [[./entrusted_webserver][entrusted_webserver]] | Online service feature with a Web interface |
| [[./entrusted_webclient][entrusted_webclient]] | Command-line client for the =webserver=     |
| [[./entrusted_l10n][entrusted_l10n]]      | Shared library for translation features     |
|---------------------+---------------------------------------------|

** Architecture overview

Below is a high-level architecture overview, the solution relies on a container engine solution (i.e. [[https://www.docker.com/][Docker]]).

[[./images/image.png]]


* What is required?

- *Operating System*: Linux, Mac OS or Windows
  - Mostly Linux has been tested
  - BSD users can probably use the "Online service" from the Live CD ISO (via VirtualBox, etc.)
- *Container Runtime*: [[https://podman.io/][Podman]], [[https://www.docker.com/][Docker]] or [[https://github.com/lima-vm/lima][Lima]]
  - On Linux, please install Podman
  - On Windows, Docker is recommended
  - On Mac OS, please use either Docker or Lima

Conversions will fail if the container solution is not running or available in your [[https://www.java.com/en/download/help/path.html]["PATH settings"]]:
  - The tool doesn't attempt to modify software on your machine (install or change other programs)
  - The tool doesn't attempt to manage other software running on your machine (start/stop services)
