<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="author" content="Rimero Solutions Inc."/>
    <meta name="application-name" content="dangerzone-web"/>
    <meta name="description" content="Dangerzone Web Application"/>
    <title>Dangerzone Web</title>
    <script>
      let fileCounter = 0;
      let fileList = new Array();
      let logByFileId = new Map();
      let isConverting = false;

      function toggleOneSelection(source) {
        let found = false;

        for (let i = 0; i < fileList.length && !found; i++) {
          let fileObj = fileList[i];
          let chkFileId = "chk-" + fileObj.id;

          if (chkFileId == source.id) {
            found = true;
          }
        }

        if (found) {
          fireSelectionChange();
        }
      }

      function toggleSelection(selectedFlag) {
        let ret = false;

        for (let i = 0; i < fileList.length; i++) {
          let fileObj = fileList[i];
          let chkFileId = "chk-" + fileObj.id;
          let checkboxElement = document.getElementById(chkFileId);

          if (checkboxElement.checked != selectedFlag) {
            if (!checkboxElement.disabled) {
              checkboxElement.checked = selectedFlag;
            }
            ret = true;
          }
        }

        return ret;
      }

      function selectAll() {
        if (toggleSelection(true)) {
          fireSelectionChange();
        }
      }

      function selectedIndices() {
        let ret = [];

        for (let i = 0; i < fileList.length; i++) {
          let fileObj = fileList[i];
          let chkFileId = "chk-" + fileObj.id;
          let checkboxElement = document.getElementById(chkFileId);

          if (checkboxElement.checked && !checkboxElement.disabled) {
            ret.push(i);
          }
        }

        return ret;
      }

      function deleteSelection() {
        let indices = selectedIndices();
        let ret = false;

        while (indices.length != 0) {
          let i = indices.pop();

          let fileObj = fileList[i];
          let childElement = document.getElementById(fileObj.id);
          let parentElement = childElement.parentElement;

          logByFileId.delete(fileObj.id);
          parentElement.removeChild(childElement);
          fileList.splice(i, 1);

          ret = true;
        }

        if (ret) {
          fireSelectionChange();
        }
      }

      function fireSelectionChange() {
        let indices = selectedIndices();
        let noDataSelected = (indices.length == 0);
        let deleteButtonElement = document.getElementById("deleteButton");

        if (deleteButtonElement.disabled != noDataSelected) {
          deleteButtonElement.disabled = noDataSelected;
        }

        if (noDataSelected) {
          if (fileList.length == 0) {
            let submitButton = document.getElementById("submitButton");
            submitButton.disabled = true;

            let conversionContainerElement = document.getElementById("conversionContainer");
            conversionContainerElement.className = "invisible";
          }
        }
      }

      function deselectAll() {
        if (toggleSelection(false)) {
          fireSelectionChange();
        }
      }

      function preventDefaults(event) {
        event.preventDefault();
      }

      function fileSelectionChanged(event) {
        let fileButtonElement = document.getElementById("fileButton");
        updateFileList(fileButtonElement.files);
      }

      function fileExplorer(event) {
        let fileButton = document.getElementById("fileButton");
        fileButton.click();
      }

      function uploadFile(event) {
        event.preventDefault();
        let currentFileList = event.dataTransfer.files;

        if (isConverting) {
          isConverting = false;
          fileList.clear();
        }

        updateFileList(currentFileList);
      }

      function resetFileListTable() {
        if (fileList.length == 0) {
          logByFileId.clear();
          let fileListTableBodyElement = document.getElementById("fileListTableBody");

          for (let i = fileListTableBodyElement.children.length - 1; i >= 0; i--) {
            fileListTableBodyElement.removeChild(fileListTableBodyElement.children[fileListTableBodyElement.children.length - 1]);
          }

          let fileListTableElement = document.getElementById("conversionContainer");
          fileListTableElement.className = "invisible";
        }
      }

      function updateFileList(currentFileList) {
        if (fileList.length == 0) {
          resetFileListTable();
        }

        if (currentFileList != undefined) {
          let fileListTableElement = document.getElementById("conversionContainer");

          if (fileListTableElement.className != "visible") {
            fileListTableElement.className = "visible";
          }

          let submitButton = document.getElementById("submitButton");
          submitButton.disabled = false;
          let fileListTable = document.getElementById("fileListTableBody");
          let documentFragment = document.createDocumentFragment();

          for (let i = 0; i < currentFileList.length; i++) {
            let fileObj = {
              id: "file-" + Date.now() + "" + i,
              fileName: currentFileList[i].name,
              progressStatus: "0%",
              processingStatus: 'Pending',
              progressMessage: "",
              file: currentFileList[i]
            };

            fileList.push(fileObj);

            let columnData = [fileObj.fileName, fileObj.progressStatus, fileObj.processingStatus, fileObj.progressMessage];
            let idPrefixes = ["filename-", "progress-status-", "processing-status-", "progress-message-"];
            let rowElement = document.createElement("tr");
            rowElement.id = fileObj.id;

            for (let j = 0; j < idPrefixes.length; j++) {
              let rowColumnElement = document.createElement("td");
              rowColumnElement.id = idPrefixes[j] + fileObj.id;

              if (j == 0) {
                let checkboxElement = document.createElement("input");
                checkboxElement.type = "checkbox";
                checkboxElement.id = "chk-" + fileObj.id;
                checkboxElement.name = "chk" + fileObj.id;
                checkboxElement.className = "deleteFileIcon";
                rowColumnElement.appendChild(checkboxElement);

                let checkboxLabelElement = document.createElement("label");
                checkboxLabelElement.for = "chk-" + fileObj.id;
                checkboxLabelElement.innerText = columnData[j];
                rowColumnElement.appendChild(checkboxLabelElement);
              } else if (j == 1) {
                let progressElement = document.createElement("progress");
                progressElement.id = "progress-" + fileObj.id;
                progressElement.value = 0;
                progressElement.max = 100;
                rowColumnElement.appendChild(progressElement);
              } else {
                if (j == 2) {
                  rowColumnElement.className= "pending";
                }

                rowColumnElement.innerText = columnData[j];
              }

              rowElement.appendChild(rowColumnElement);
            }

            documentFragment.appendChild(rowElement);
          }

          fileListTable.appendChild(documentFragment);
        }
      }

      function toggleOcrCheckbox(source) {
        let ocrLangSelect = document.getElementById("ocrLangSelect");
        ocrLangSelect.disabled = !(source.checked);
      }

      function toggleSubmitButtonState() {
        let submitButton = document.getElementById("submitButton");
        submitButton.disabled = (fileList.length == 0);
      }

      function disableLinkListener(event) {
        let source = event.target;
        source.className = "visitedLink";
        source.title = "File deleted from server.";
        source.removeEventListener("click", disableLinkListener);
      }

      function openLog(fileId) {
        let modal = document.getElementById("logWindow");
        let modalContent = document.getElementById("modalContent");
        let logs = logByFileId.get(fileId) || [];
        let documentFragment = document.createDocumentFragment();
        let windowTitle = document.createElement("h3");

        windowTitle.innerText = "Logs";
        documentFragment.appendChild(windowTitle);

        for (let i = 0; i < logs.length; i++) {
          let logElement = document.createElement("li");
          logElement.innerText = logs[i].data;
          documentFragment.appendChild(logElement);
        }

        modalContent.appendChild(documentFragment);
        modal.style.display = "block";
      }

      function transitionStatusElement(element, value) {
        element.innerText = value;
        element.className = value.toLowerCase();
      }

      function submitOneFile(fileObj, ocrSettings, uploadUrl) {
        let file = fileObj.file;
        let fileObjId = fileObj.id;

        let filename = fileObj.fileName;

        let formData = new FormData();
        formData.append("file", file);
        formData.append("filename", filename);

        if (ocrSettings["ocrlang"] != null && ocrSettings["ocrlang"] != undefined) {
          formData.append("ocrlang", ocrSettings["ocrlang"]);
        }

        let progressElement = document.getElementById("progress-" + fileObjId);
        let processingStatusElement = document.getElementById("processing-status-" + fileObjId);
        let progressMessageElement = document.getElementById("progress-message-" + fileObjId);

        logByFileId.set(fileObjId, new Array());

        function onComplete(fileObjId, fileStatus, downloadLocation) {
          let fprogressElement = document.getElementById("progress-" + fileObjId);
          let fprocessingStatusElement = document.getElementById("processing-status-" + fileObjId);

          fprogressElement.value = 100;
          transitionStatusElement(fprocessingStatusElement, fileStatus);

          let fprocessingMessageElement = document.getElementById("progress-message-" + fileObjId);
          fprocessingMessageElement.innerHTML = "";

          if (downloadLocation) {
            let downloadElement = document.createElement("a");
            downloadElement.target = "_blank";
            downloadElement.rel = "noopener noreferer";
            downloadElement.innerText = "Download trusted PDF";
            downloadElement.title = "Once downloaded, the PDF will be permanently deleted from the server.";
            downloadElement.href = downloadLocation;
            downloadElement.addEventListener("click", disableLinkListener);
            fprocessingMessageElement.appendChild(downloadElement);
          }

          if (downloadLocation) {
            let spacerElement = document.createElement("span");
            spacerElement.innerHTML = "&nbsp;|&nbsp;"
            fprocessingMessageElement.appendChild(spacerElement);
          }

          let fullLogElement = document.createElement("a");
          fullLogElement.innerText = "Logs";
          fullLogElement.href = "#";
          fullLogElement.addEventListener("click", function(e) {
            openLog(fileObjId);
          });
          fprocessingMessageElement.appendChild(fullLogElement);

          if (fileList.length != 0) {
            let nextFileObj = fileList.shift();
            let checkboxElement = document.getElementById("chk-" + nextFileObj.id);
            checkboxElement.disabled = true;
            submitOneFile(nextFileObj, ocrSettings, uploadUrl);
          }
        }

        transitionStatusElement(processingStatusElement, "InProgress");

        return fetch(uploadUrl, {method: "POST", body: formData })
          .then( response => {
            if (response.ok) {
              response.json().then(data => {
                let fileId = data.id
                let statusUrl = "./events/" + fileId;
                let sse = new EventSource(statusUrl);

                function handleSseError() {
                  sse.close();
                  onComplete(fileObjId, "Failed");
                }

                sse.addEventListener("processing_success", function(e) {
                  sse.close();
                  let downloadLocation = "./downloads/" + fileId;
                  onComplete(fileObjId, "Succeeded", downloadLocation);
                });

                sse.addEventListener("processing_failure", function(e) {
                  handleSseError();
                });

                sse.addEventListener("error", function(e) {
                  handleSseError();
                });

                sse.addEventListener("processing_update", function(e) {
                  let ndata = e.data;

                  try {
                    let n = JSON.parse(ndata);

                    if (n != undefined) {
                      logByFileId.get(fileObjId).push(n);
                      progressMessageElement.innerText = n.data;

                      if (n.percent_complete != 0) {
                        progressElement.value = n.percent_complete;
                      }
                    } else {
                      progressMessageElement.innerText = ndata;
                    }
                  } catch (e) {
                    console.log("error:", e);
                  }
                });
              });
            } else {
              progressMessageElement.innerText = response.statusText;
              logByFileId.get(fileObjId).push({
                percent_complete: 100,
                data: response.statusText
              });
              onComplete(fileObjId, "Failed", null);
            }
          })
          .catch(function(error) {
            progressMessageElement.innerText = error;
            logByFileId.get(fileObjId).push({
              percent_complete: 100,
              data: error
            });
            onComplete(fileObjId, "Failed", null);
          });
      }

      function submitForm(source) {
        isConverting = true;
        source.disabled = true;

        let ocrCheckbox = document.getElementById("ocrCheckbox");
        let ocrLangSelect = document.getElementById("ocrLangSelect");
        let uploadForm = document.getElementById("uploadForm");
        let uploadUrl = uploadForm.action;

        let ocrSettings = {};

        if (ocrCheckbox.checked) {
          ocrSettings.ocrlang = ocrLangSelect.value;
        }

        let fileObj = fileList.shift();

        let checkboxElement = document.getElementById("chk-" + fileObj.id);
        checkboxElement.disabled = true;

        submitOneFile(fileObj, ocrSettings, uploadUrl);
      }

      function clearModalContents() {
        let modal = document.getElementById("logWindow");
        let modalContent = document.getElementById("modalContent");

        for (let i = modalContent.children.length - 1; i > 0; i--) {
          modalContent.removeChild(modalContent.children[modalContent.children.length - 1]);
        }

        modal.style.display = "none";
      }

      window.addEventListener("DOMContentLoaded", function(event) {
        let submitButton = document.getElementById("submitButton");
        let deleteButton = document.getElementById("deleteButton");
        deleteButton.disabled = true;
        submitButton.disabled = true;

        let modalCloseElement = document.getElementById("modalClose");
        modalCloseElement.addEventListener("click", function(evt) {
          clearModalContents();
        }, true);

        window.addEventListener("click", function(evt) {
          let x = evt.clientX;
          let y = evt.clientY;
          let modalContent = document.getElementById("modalContent");
          let rect = modalContent.getBoundingClientRect();

          if (!(rect.x <= x && rect.x + rect.width >= x && rect.y <= y && rect.y + rect.height >= y)) {
            clearModalContents();
          }
        }, true);

        let fileListTable = document.getElementById("fileListTable");
        fileListTable.addEventListener("click", function(evt) {
          let clickedElement = evt.target;

          if (clickedElement.classList.contains("deleteFileIcon")) {
            toggleOneSelection(clickedElement);
          }
        }, true);
      }, true);
    </script>

    <style>
      .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 5%; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
      }

      /* Modal Content */
      .modal-content {
        background-color: #fefefe;
        text-align:center;
        margin: auto;
        padding: 5%;
        border: 1px solid #888;
        width: 80%;
        height: 70%;
        overflow:auto;
      }

      .modal-content li {
        text-align:left;
      }

      /* The Close Button */
      .close {
        color: #aaaaaa;
        float: right;
        font-size: 2em;
        font-weight: bold;
      }

      .close:hover,
      .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
      }

      .row:after {
        float:left;
        text-align: left;
        content: "";
        display: table;
        clear: both;
      }

      .column {
        display: table;
        float: left;
        text-align: left;
        /* background: yellow; */
      }

      body {
        background-color: #C8C8C8;
      }

      hr {
        width: 50%;
      }

      progress {
        width:80%;
        accent-color: yellow;
      }

      .fileNameColumn {
        width: 30%;
      }

      .progressStatusColumn {
        width: 10%;
      }

      .processingStatusColumn {
        width: 10%;
      }

      .progressMessageColumn {
        width: 50%;
      }

      #dropFileZone {
        background-color: red;
        color: white;
        border: #999 2px solid;
        border-radius: 1em;
        height: 1%;
        font-size: 1em;
      }

      #dragUploadFile {
        width: 50%;
        margin: 0 auto;
      }

      #dragUploadFile p {
        text-align: center;
      }

      #dragUploadFile #fileButton {
        display: none;
      }

      thead {
        vertical-align: top;
        border: 1px solid black;
      }

      thead tr {
        text-align: left;
        /* background: yellow; */
        border: 1px solid black;
      }

      .title-text {
        text-align: center;
        color: maroon;
      }

      .deleteFileIcon {
      }

      .header {
        margin-top: 0.5%;
        background: #a69350;
        /* color: yellow; */
        border: 1px solid #a69350;
      }

      #fileListTable {
        margin-top: 1%;
        overflow: auto;
        width: 100%;
      }

      .visitedLink {
        text-decoration: line-through;
      }

      .succeeded {
        accent-color: green;
        color: green;
      }

      .pending {
        color: magenta;
        accent-color: magenta;
      }

      .failed {
        color: red;
        accent-color: red;
      }

      .inprogress {
        color: orange;
        accent-color: orange;
      }

      .invisible {
        display: none;
      }

      .visible {
        display: visible;
      }

      fieldset {
        border: 2px solid blue;
      }

      legend {
        padding: 10px;
        background: blue;
        color: cyan;
      }

      #eventList {
        overflow: auto;
        margin: 0;
        padding: 10px 1px 1px 1px;
        background: yellow;
        border: 5px solid #977c27;
        font-family: monospace;
      }

      #eventList li {
        list-style-type: none;
        text-align: left;
        margin: 0;
        padding: 0;
      }

      .actionButton {
        border: none;
        margin-left: 1%;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
      }
    </style>
  </head>

  <body>
    <noscript>Your browser does not support JavaScript!</noscript>
    <div id="logWindow" class="modal">
      <div class="modal-content" id="modalContent">
        <span class="close" id="modalClose">&times;</span>
      </div>
    </div>
    <h3 class="title-text">Dangerzone Web</h3>
    <br/>
    <div>
      <form id="uploadForm" action="./upload" method="post" enctype="multipart/form-data" onsubmit="preventDefaults(event)">
        <fieldset>
          <legend>Conversion Options</legend>
          <table>
            <tbody>
              <tr>
                <td>
                  <input type="checkbox" id="ocrCheckbox" name="ocr" onchange="toggleOcrCheckbox(this)" title="OCR (Optical character recognition) will be applied.">
                  <label for="ocrCheckbox">Make PDF searchable?</label>
                </td>
                <td>
                  <label for="ocrLangSelect">Yes, with language:</label>
                  <select id="ocrLangSelect" name="ocrLangSelect" disabled>
                    <option value="ar">Afrikaans</option>
                    <option value="sqi">Albanian</option>
                    <option value="amh">Amharic</option>
                    <option value="ara">Arabic</option>
                    <option value="Arabic">Arabic script</option>
                    <option value="hye">Armenian</option>
                    <option value="Armenian">Armenian script</option>
                    <option value="asm">Assamese</option>
                    <option value="aze">Azerbaijani</option>
                    <option value="aze_cyrl">Azerbaijani (Cyrillic)</option>
                    <option value="eus">Basque</option>
                    <option value="bel">Belarusian</option>
                    <option value="ben">Bengali</option>
                    <option value="Bengali">Bengali script</option>
                    <option value="bos">Bosnian</option>
                    <option value="bre">Breton</option>
                    <option value="bul">Bulgarian</option>
                    <option value="mya">Burmese</option>
                    <option value="Canadian_Aboriginal">Canadian Aboriginal script</option>
                    <option value="cat">Catalan</option>
                    <option value="ceb">Cebuano</option>
                    <option value="chr">Cherokee</option>
                    <option value="Cherokee">Cherokee script</option>
                    <option value="chi_sim">Chinese - Simplified</option>
                    <option value="chi_sim_vert">Chinese - Simplified (vertical)</option>
                    <option value="chi_tra">Chinese - Traditional</option>
                    <option value="chi_tra_vert">Chinese - Traditional (vertical)</option>
                    <option value="cos">Corsican</option>
                    <option value="hrv">Croatian</option>
                    <option value="Cyrillic">Cyrillic script</option>
                    <option value="ces">Czech</option>
                    <option value="dan">Danish</option>
                    <option value="Devanagari">Devanagari script</option>
                    <option value="div">Divehi</option>
                    <option value="nld">Dutch</option>
                    <option value="dzo">Dzongkha</option>
                    <option value="eng" selected>English</option>
                    <option value="enm">English, Middle (1100-1500)</option>
                    <option value="epo">Esperanto</option>
                    <option value="est">Estonian</option>
                    <option value="Ethiopic">Ethiopic script</option>
                    <option value="fao">Faroese</option>
                    <option value="fil">Filipino</option>
                    <option value="fin">Finnish</option>
                    <option value="Fraktur">Fraktur script</option>
                    <option value="frk">Frankish</option>
                    <option value="fra">French</option>
                    <option value="frm">French, Middle (ca.1400-1600)</option>
                    <option value="fry">Frisian (Western)</option>
                    <option value="gla">Gaelic (Scots)</option>
                    <option value="glg">Galician</option>
                    <option value="kat">Georgian</option>
                    <option value="Georgian">Georgian script</option>
                    <option value="deu">German</option>
                    <option value="ell">Greek</option>
                    <option value="Greek">Greek script</option>
                    <option value="guj">Gujarati</option>
                    <option value="Gujarati">Gujarati script</option>
                    <option value="Gurmukhi">Gurmukhi script</option>
                    <option value="Hangul">Hangul script</option>
                    <option value="Hangul_vert">Hangul (vertical) script</option>
                    <option value="HanS">Han - Simplified script</option>
                    <option value="HanS_vert">Han - Simplified (vertical) script</option>
                    <option value="HanT">Han - Traditional script</option>
                    <option value="HanT_vert">Han - Traditional (vertical) script</option>
                    <option value="hat">Hatian</option>
                    <option value="heb">Hebrew</option>
                    <option value="Hebrew">Hebrew script</option>
                    <option value="hin">Hindi</option>
                    <option value="hun">Hungarian</option>
                    <option value="isl">Icelandic</option>
                    <option value="ind">Indonesian</option>
                    <option value="iku">Inuktitut</option>
                    <option value="gle">Irish</option>
                    <option value="ita">Italian</option>
                    <option value="ita_old">Italian - Old</option>
                    <option value="jpn">Japanese</option>
                    <option value="Japanese">Japanese script</option>
                    <option value="jpn_vert">Japanese (vertical)</option>
                    <option value="Japanese_vert">Japanese (vertical) script</option>
                    <option value="jav">Javanese</option>
                    <option value="kan">Kannada</option>
                    <option value="Kannada">Kannada script</option>
                    <option value="kaz">Kazakh</option>
                    <option value="khm">Khmer</option>
                    <option value="Khmer">Khmer script</option>
                    <option value="kor">Korean</option>
                    <option value="kor_vert">Korean (vertical)</option>
                    <option value="kur_ara">Kurdish (Arabic)</option>
                    <option value="kir">Kyrgyz</option>
                    <option value="lao">Lao</option>
                    <option value="Lao">Lao script</option>
                    <option value="lat">Latin</option>
                    <option value="Latin">Latin script</option>
                    <option value="lav">Latvian</option>
                    <option value="lit">Lithuanian</option>
                    <option value="ltz">Luxembourgish</option>
                    <option value="mkd">Macedonian</option>
                    <option value="mal">Malayalam</option>
                    <option value="Malayalam">Malayalam script</option>
                    <option value="msa">Malay</option>
                    <option value="mlt">Maltese</option>
                    <option value="mri">Maori</option>
                    <option value="mar">Marathi</option>
                    <option value="mon">Mongolian</option>
                    <option value="Myanmar">Myanmar script</option>
                    <option value="nep">Nepali</option>
                    <option value="nor">Norwegian</option>
                    <option value="oci">Occitan (post 1500)</option>
                    <option value="kat_old">Old Georgian</option>
                    <option value="Oriya">Oriya (Odia) script</option>
                    <option value="ori">Oriya</option>
                    <option value="pus">Pashto</option>
                    <option value="fas">Persian</option>
                    <option value="pol">Polish</option>
                    <option value="por">Portuguese</option>
                    <option value="pan">Punjabi</option>
                    <option value="que">Quechua</option>
                    <option value="ron">Romanian</option>
                    <option value="rus">Russian</option>
                    <option value="san">Sanskrit</option>
                    <option value="osd">script and orientation</option>
                    <option value="srp_latn">Serbian (Latin)</option>
                    <option value="srp">Serbian</option>
                    <option value="snd">Sindhi</option>
                    <option value="Sinhala">Sinhala script</option>
                    <option value="sin">Sinhala</option>
                    <option value="slk">Slovakian</option>
                    <option value="slv">Slovenian</option>
                    <option value="spa_old">Spanish, Castilian - Old</option>
                    <option value="spa">Spanish</option>
                    <option value="sun">Sundanese</option>
                    <option value="swa">Swahili</option>
                    <option value="swe">Swedish</option>
                    <option value="Syriac">Syriac script</option>
                    <option value="syr">Syriac</option>
                    <option value="tgk">Tajik</option>
                    <option value="Tamil">Tamil script</option>
                    <option value="tam">Tamil</option>
                    <option value="tat">Tatar</option>
                    <option value="Telugu">Telugu script</option>
                    <option value="tel">Telugu</option>
                    <option value="Thaana">Thaana script</option>
                    <option value="Thai">Thai script</option>
                    <option value="tha">Thai</option>
                    <option value="Tibetan">Tibetan script</option>
                    <option value="bod">Tibetan Standard</option>
                    <option value="tir">Tigrinya</option>
                    <option value="ton">Tonga</option>
                    <option value="tur">Turkish</option>
                    <option value="ukr">Ukrainian</option>
                    <option value="urd">Urdu</option>
                    <option value="uig">Uyghur</option>
                    <option value="uzb_cyrl">Uzbek (Cyrillic)</option>
                    <option value="uzb">Uzbek</option>
                    <option value="Vietnamese">Vietnamese script</option>
                    <option value="vie">Vietnamese</option>
                    <option value="cym">Welsh</option>
                    <option value="yid">Yiddish</option>
                    <option value="yor">Yoruba</option>
                  </select>
                </td>
            </tbody>
          </table>
        </fieldset>
        <br/>
        <div id="dropFileZone" ondrop="uploadFile(event)" ondragover="return false">
          <div id="dragUploadFile">
            <p>Drop 'potentially suspicious' file(s) here</p>
            <p>or</p>
            <p><input type="button" value="Click here to select file(s)" onclick="fileExplorer(event)"></p>
            <input type="file" name="fileButton" id="fileButton" onChange="fileSelectionChanged(event)" multiple>
          </div>
        </div>
      </form>
    </div>
    <br/>
    <div id="conversionContainer" class="invisible">
      <hr/>
      <table width="100%">
        <tbody>
          <tr>
            <td width="15%">
              <p><a href="#" onclick="selectAll()">Select all</a></p>
              <p><a href="#" onclick="deselectAll()">Deselect all</a></p>
            </td>
            <td width="35%">
              <button id="deleteButton" class="actionButton" onclick="deleteSelection()" disabled>Remove selected file(s)</button>
            </td>
            <td width="35%">
              <button onclick="submitForm(this)" id="submitButton" class="actionButton" disabled>Convert document(s)!</button>
            </td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <table id="fileListTable">
        <thead>
          <tr>
            <th class="fileNameColumn">Filename</th>
            <th class="progressStatusColumn">Progress(%)</th>
            <th class="processingStatusColumn">Status</th>
            <th class="progressMessageColumn">Message</th>
          </tr>
        </thead>
        <tbody id="fileListTableBody"></tbody>
      </table>
    </div>
  </body>

</html>
