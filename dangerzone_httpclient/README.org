#+TITLE: dangerzone-httpclient README

* What is this?

This repository provides a command-line client for the =dangerzone-httpserver= component. It also acts a concrete tutorial of the =dangerzone-httpserver= API usage.

There are few reasons to run the =dangerzone-httpclient= binary:
- You opted to install the =dangerzone-httpserver= instead of the default clients (GUI or CLI)
- You do not want your Web browser to use more resources (Nowadays, most browsers require ~1GB of RAM just with few tabs open!)
- Occasionally you want to run automation scripts ([[https://unix.stackexchange.com/questions/12902/how-to-run-find-exec][find and exec]]).
  - This can be use for recursive conversions
  - This can supplement existing workflows driven from shell scripts

* How does it works?

The client invokes the =dangerzone-httpserver= Web API and processes notifications from [[https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events][SSE events]].

  [[./images/architecture.png]]

* What does it look like?

In the screenshot below, the client is running in an Ubuntu Linux VM and the server is running inside a Debian Linux VM.

[[./images/screenshot-cli.png]]

* How to build this?

At the root of this project, open a command prompt and type =cargo build=.

* How to run this?

The =dangerzone-httpclient= binary is similar to the =dangerzone-cli= except that it interacts with a Web API.

** Basic usage

#+begin_src sh
  ./target/debug/dangerzone-httpclient --input-filename suspicious_file.pdf
#+end_src

** Advanced usage

Please use the =help= flag for additional information (setting up the server host and port, the OCR language, etc.)

#+begin_src sh
  ./target/debug/dangerzone-httpclient --help
#+end_src

* Is there a configuration file?

Yes, the configuration file (=config.toml=) is optional and its location is operating system dependent.

** Configuration file location

|------------------+-----------------------------------------------------------------------|
| Operating System | Configuration File Location                                           |
|------------------+-----------------------------------------------------------------------|
| Linux & Others   | =XDG_CONFIG_HOME/dangerzone-httpclient/config.toml=                   |
| Mac OS           | =$HOME/Library/Application Support/dangerzone-httpclient/config.toml= |
| Windows          | =%APPDATA%\dangerzone-httpclient\config.toml=                         |
|------------------+-----------------------------------------------------------------------|

** Configuration format

The configuration format is [[https://toml.io/en/][TOML]], it's a bit similar to [[https://en.wikipedia.org/wiki/INI_file][INI]] files syntax.

*** Example

#+begin_src conf-toml
  ocr-lang = "eng"
  host = "localhost"    
  port = 13000
#+end_src

*** Overview

|-----------+----------------------------------------------|
| Parameter | Description                                  |
|-----------+----------------------------------------------|
| ocr-lang  | The tesseract OCR langcode is OCR is desired |
| host      | The server hostname or IP address            |
| port      | The server port number                       |
|-----------+----------------------------------------------|

